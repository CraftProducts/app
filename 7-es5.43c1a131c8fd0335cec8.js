!function(){function e(e,t){for(var c=0;c<t.length;c++){var i=t[c];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"Y+n1":function(c,i,r){"use strict";r.r(i),r.d(i,"TemplatesModule",(function(){return oe}));var a=r("ofXK"),n=r("3Pt+"),s=r("tyNb"),o=r("1kSV"),l=r("+1ss"),d=r("Tzox"),u=r("6NWb"),f=r("l2bN"),p=r("kt0X"),m=r("snw9"),b={LoadTemplates:Object(d.i)("[LoadTemplates]"),LoadTemplatesFailed:Object(d.i)("[LoadTemplates] Failed"),LoadTemplatesSuccess:Object(d.i)("[LoadTemplates] Success"),LoadFile:Object(d.i)("[LoadFile]")},h=function e(c){t(this,e),this.payload=c,this.type=b.LoadTemplates},g=function e(c){t(this,e),this.payload=c,this.type=b.LoadFile};function y(e,t){switch(t.type){case b.LoadTemplatesSuccess:return Object.assign(Object.assign({},e),{list:t.payload});default:return e}}var v,T={list:null},L=r("mrSG"),O=r("LRne"),w=r("eIep"),j=r("lJxs"),F=r("JIr8"),J=r("fXoL"),x=((v=function e(c,i){var r=this;t(this,e),this.actions$=c,this.templateService=i,this.loadTemplates=this.actions$.pipe(Object(m.d)(b.LoadTemplates),Object(w.a)((function(e){return r.templateService.loadTemplates().pipe(Object(j.a)((function(e){return{type:b.LoadTemplatesSuccess,payload:e}})),Object(F.a)((function(){return Object(O.a)({type:b.LoadTemplatesFailed})})))})))}).\u0275fac=function(e){return new(e||v)(J.lc(m.a),J.lc(d.f))},v.\u0275prov=J.Tb({token:v,factory:v.\u0275fac}),Object(L.b)([Object(m.b)()],v.prototype,"loadTemplates",void 0),v),k=r("CpTu"),$=r("Z0Cl"),I=r("G3A0"),C=function(e){return e!=e},P=r("5WsY"),V=r("8M4i"),S=r("/1FC"),X=r("EUcb"),q=r("fshX"),G=r("twO/"),Y=r("mkut"),U=Math.max,M=r("pLZG"),R=r("ZR4k"),E=r("7zfz");function W(e,t){1&e&&(J.dc(0,"div"),J.Yb(1,"fa-icon",5),J.Vc(2," loading... "),J.cc()),2&e&&(J.Jb(1),J.yc("spin",!0))}var N=function(e){return{"bg-white":e}},z=function(e,t){return{group:e,code:t}};function D(e,t){if(1&e&&(J.dc(0,"li",34),J.dc(1,"a",35),J.Vc(2),J.cc(),J.cc()),2&e){var c=t.$implicit,i=J.rc(2).$implicit,r=J.rc(3);J.yc("ngClass",J.Cc(3,N,r.selectedCode===c.code)),J.Jb(1),J.yc("queryParams",J.Dc(5,z,i.code,c.code)),J.Jb(1),J.Xc(" ",c.title," ")}}function H(e,t){if(1&e&&(J.dc(0,"ul",32),J.Tc(1,D,3,8,"li",33),J.cc()),2&e){var c=J.rc().$implicit;J.Jb(1),J.yc("ngForOf",c.list)}}function Z(e,t){if(1&e&&(J.dc(0,"div",29),J.dc(1,"h6",30),J.Vc(2),J.cc(),J.Tc(3,H,2,1,"ul",31),J.cc()),2&e){var c=t.$implicit;J.Jb(2),J.Xc("",c.title," "),J.Jb(1),J.yc("ngIf",c.list&&c.list.length>0)}}function A(e,t){if(1&e&&(J.dc(0,"div",25),J.dc(1,"div",26),J.dc(2,"div",27),J.Tc(3,Z,4,2,"div",28),J.cc(),J.cc(),J.cc()),2&e){var c=J.rc(2);J.Jb(3),J.yc("ngForOf",c.details.groups)}}function B(e,t){1&e&&(J.dc(0,"a",39),J.Yb(1,"fa-icon",40),J.cc())}function K(e,t){if(1&e&&(J.dc(0,"div",36),J.Tc(1,B,2,0,"a",37),J.dc(2,"h6",38),J.Vc(3),J.cc(),J.dc(4,"small",30),J.Vc(5),J.cc(),J.cc()),2&e){var c=J.rc(2);J.Jb(1),J.yc("ngIf",c.selectedCode),J.Jb(2),J.Wc(c.selectedGroup.title),J.Jb(2),J.Wc(c.selectedGroup.summary)}}function Q(e,t){if(1&e&&J.Yb(0,"img",47),2&e){var c=J.rc().$implicit,i=J.rc(3);J.yc("src",i.templateFileLocation+"/"+c.thumbnail,J.Oc)}}var _=function(e,t){return[e,t]},ee=function(){return{view:"intro"}};function te(e,t){if(1&e&&(J.dc(0,"a",42),J.dc(1,"h6",43),J.Vc(2),J.cc(),J.dc(3,"div",44),J.Tc(4,Q,1,1,"img",45),J.dc(5,"div",46),J.dc(6,"ngx-md"),J.Vc(7),J.sc(8,"truncate"),J.cc(),J.cc(),J.cc(),J.cc()),2&e){var c=t.$implicit,i=J.rc(3);J.yc("routerLink",J.Dc(10,_,i.redirectTo,c.code))("queryParams",J.Bc(13,ee))("title",c.title),J.Jb(2),J.Xc("",c.title," "),J.Jb(2),J.yc("ngIf",c.thumbnail),J.Jb(3),J.Wc(J.vc(8,6,c.summary,125,"..."))}}function ce(e,t){if(1&e&&(J.bc(0),J.Tc(1,te,9,14,"a",41),J.ac()),2&e){var c=J.rc(2);J.Jb(1),J.yc("ngForOf",c.filteredList)}}function ie(e,t){if(1&e&&(J.dc(0,"div",48),J.Yb(1,"fa-icon",49),J.Vc(2," No templates registered yet. "),J.dc(3,"div",50),J.dc(4,"a",51),J.Vc(5," learn here "),J.Yb(6,"fa-icon",23),J.cc(),J.cc(),J.cc()),2&e){var c=J.rc(2);J.Jb(4),J.yc("href",c.documentationUrl,J.Oc)}}function re(e,t){if(1&e){var c=J.ec();J.dc(0,"div",6),J.Tc(1,A,4,1,"div",7),J.dc(2,"div",8),J.dc(3,"div",9),J.dc(4,"h1",10),J.Vc(5),J.cc(),J.dc(6,"div",11),J.Yb(7,"ngx-md",12),J.cc(),J.Tc(8,K,6,3,"div",13),J.dc(9,"div",14),J.dc(10,"div",15),J.dc(11,"h6",16),J.Vc(12,"Use custom template"),J.cc(),J.dc(13,"div",17),J.dc(14,"div",18),J.Vc(15," Can't find a template? Use your own template. "),J.dc(16,"div",19),J.dc(17,"sharedlib-load-localfile",20),J.pc("fileLoaded",(function(e){return J.Mc(c),J.rc().onTemplateFileLoaded(e)}))("error",(function(e){return J.Mc(c),J.rc().onFileLoadingError(e)})),J.cc(),J.cc(),J.dc(18,"div",21),J.dc(19,"a",22),J.Vc(20," learn here "),J.Yb(21,"fa-icon",23),J.cc(),J.cc(),J.cc(),J.cc(),J.cc(),J.Tc(22,ce,2,1,"ng-container",3),J.Tc(23,ie,7,1,"div",24),J.cc(),J.cc(),J.cc(),J.cc()}if(2&e){var i=J.rc();J.Jb(1),J.yc("ngIf",i.details.groups&&i.details.groups.length>0),J.Jb(4),J.Xc(" ",i.details.title," "),J.Jb(2),J.yc("data",i.details.summary),J.Jb(1),J.yc("ngIf",i.selectedGroup),J.Jb(11),J.yc("href",i.documentationUrl,J.Oc),J.Jb(3),J.yc("ngIf",i.filteredList&&i.filteredList.length>0),J.Jb(1),J.yc("ngIf",!i.filteredList||0===i.filteredList.length)}}var ae,ne,se=[{path:"",component:(ae=function(){function c(e,i,r,a,n){var s=this;t(this,c),this.store$=e,this.router=i,this.activatedRoute=r,this.messageService=a,this.isCollapsed=!0,this.redirectTo="/",this.templateFileLocation="",this.documentationUrl="",this.onFileLoadingError=function(e){return s.messageService.add({severity:"error",detail:"Error:"+e,life:5e3,closable:!0})};var o=k.a(n,{key:"templates"});this.templateFileLocation=o?""+o.value:"";var l=k.a(n,{key:"documentation"});this.documentationUrl=l?""+l.value:""}var i,r,a;return i=c,(r=[{key:"ngOnInit",value:function(){var e=this;this.store$.dispatch(new h(null)),this.queryParams$=this.activatedRoute.queryParams.subscribe((function(t){e.selectedType=t.group,e.selectedCode=t.code,e.populateFilteredGroup()})),this.redirectTo$=this.activatedRoute.data.pipe(Object(M.a)((function(e){return e.redirectTo&&e.redirectTo.length>0})),Object(j.a)((function(e){return e.redirectTo}))).subscribe((function(t){return e.redirectTo="/"+t})),this.details$=this.store$.select((function(e){return e.templates.list})).pipe(Object(M.a)((function(e){return e}))).subscribe((function(t){e.details=t,e.populateFilteredGroup()}))}},{key:"ngOnDestroy",value:function(){this.params$&&this.params$.unsubscribe(),this.queryParams$&&this.queryParams$.unsubscribe(),this.redirectTo$&&this.redirectTo$.unsubscribe(),this.details$&&this.details$.unsubscribe()}},{key:"onTemplateFileLoaded",value:function(e){e&&e.content&&(e.type="template",e.content=Object(R.load)(e.content)),this.store$.dispatch(new g(e))}},{key:"populateFilteredGroup",value:function(){var e=this;if(this.selectedGroup=null,this.details)if(this.selectedCode&&this.selectedType&&this.details.groups){var t=k.a(this.details.groups,{code:this.selectedType});t&&t.list&&(this.selectedGroup=k.a(t.list,{code:this.selectedCode}),this.filteredList=$.a(this.details.templates,(function(t){return function(e,t,c,i){var r;e=Object(P.a)(e)?e:null==(r=e)?[]:function(e,t){return Object(G.a)(t,(function(t){return e[t]}))}(r,Object(Y.a)(r)),c=c&&!i?Object(q.a)(c):0;var a=e.length;return c<0&&(c=U(a+c,0)),function(e){return"string"==typeof e||!Object(S.a)(e)&&Object(X.a)(e)&&"[object String]"==Object(V.a)(e)}(e)?c<=a&&e.indexOf(t,c)>-1:!!a&&function(e,t,c){return t==t?function(e,t,c){for(var i=c-1,r=e.length;++i<r;)if(e[i]===t)return i;return-1}(e,t,c):Object(I.a)(e,C,c)}(e,t,c)>-1}(t[e.selectedType],e.selectedCode)})))}else this.filteredList=this.details.templates}}])&&e(i.prototype,r),a&&e(i,a),c}(),ae.\u0275fac=function(e){return new(e||ae)(J.Xb(p.h),J.Xb(s.d),J.Xb(s.a),J.Xb(E.c),J.Xb(d.b))},ae.\u0275cmp=J.Rb({type:ae,selectors:[["app-templates-list"]],decls:5,vars:2,consts:[[1,"main-container"],[1,"body-container"],[1,"container-fluid"],[4,"ngIf"],["class","row  mt-4",4,"ngIf"],["icon","spinner","aria-hidden","true",3,"spin"],[1,"row","mt-4"],["class","col-md-2",4,"ngIf"],[1,"col-md-8"],[1,"text-center"],[1,"mb-3"],[1,"pb-4"],[3,"data"],["class","alert alert-secondary rounded-0 text-left m-3 border-0","style","border-left: solid 3px #aaa!important;",4,"ngIf"],[1,"clearfix","d-flex","justify-content-center","flex-wrap"],[1,"m-2","card","select-card","custom-shadow","alert-primary"],[1,"bg-light","border-bottom","p-3","card-title"],[1,"p-2"],[1,"small"],[1,"m-2"],["errorMessage","Invalid file. System only supports CraftProduct compliant YAML files.","label","Open template file","accept","application/x-yaml","icon","upload","cssClass","btn-sm btn-primary",3,"fileLoaded","error"],[1,"text-right"],["target","blank",3,"href"],["icon","angle-right",1,"ml-1"],["class","m-2 select-card custom-shadow alert-warning pt-5",4,"ngIf"],[1,"col-md-2"],[1,"mt-5","pt-5"],[1,"alert"],["class","",4,"ngFor","ngForOf"],[1,""],[1,"text-muted"],["class","small list-unstyled",4,"ngIf"],[1,"small","list-unstyled"],["class","p-1",3,"ngClass",4,"ngFor","ngForOf"],[1,"p-1",3,"ngClass"],["routerLink","/templates","queryParamsHandling","merge",1,"text-dark",3,"queryParams"],[1,"alert","alert-secondary","rounded-0","text-left","m-3","border-0",2,"border-left","solid 3px #aaa!important"],["routerLink","/templates","class","text-muted float-right",4,"ngIf"],[1,"mb-0"],["routerLink","/templates",1,"text-muted","float-right"],["icon","times"],["queryParamsHandling","merge","class","m-2 card select-card custom-shadow text-center","style","overflow: hidden;",3,"routerLink","queryParams","title",4,"ngFor","ngForOf"],["queryParamsHandling","merge",1,"m-2","card","select-card","custom-shadow","text-center",2,"overflow","hidden",3,"routerLink","queryParams","title"],[1,"bg-light","border-bottom","p-3","card-title","text-truncate","mb-0"],[1,"p-3"],[3,"src",4,"ngIf"],[1,"card-text","small","text-left"],[3,"src"],[1,"m-2","select-card","custom-shadow","alert-warning","pt-5"],["icon","exclamation-triangle"],[1,"text-right","mt-2","small"],["target","blank",1,"btn","btn-link","btn-sm",3,"href"]],template:function(e,t){1&e&&(J.dc(0,"div",0),J.dc(1,"div",1),J.dc(2,"div",2),J.Tc(3,W,3,1,"div",3),J.Tc(4,re,24,7,"div",4),J.cc(),J.cc(),J.cc()),2&e&&(J.Jb(3),J.yc("ngIf",!t.details),J.Jb(1),J.yc("ngIf",t.details))},directives:[a.m,u.a,f.a,d.c,a.l,a.k,s.e],pipes:[l.b],encapsulation:2}),ae)}],oe=((ne=function e(){t(this,e)}).\u0275mod=J.Vb({type:ne}),ne.\u0275inj=J.Ub({factory:function(e){return new(e||ne)},imports:[[a.c,n.c,s.f,o.f,l.a,d.e,u.c,f.b,p.j.forFeature("templates",y,{initialState:T}),m.c.forFeature([x]),s.f.forChild(se)]]}),ne)}}])}();