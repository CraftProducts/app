<div class="row">
    <div class="col-md-6">
        <div *ngIf="mode !== 'EDIT'">
            <div class="bg-light" title="F2 to edit">
                <div class="list-item">
                    <button class="btn btn-light p-2 text-left w-100 rounded-0" (click)="onSelectItem(item)"
                        [ngClass]="{'selected-list-item': selectedItem && selectedItem.title === item.title}"
                        *ngFor="let item of data.list">
                        <fa-icon icon="angle-right" class="pr-1 text-muted"></fa-icon>
                        {{item.title}}
                    </button>
                </div>
                <div class="p-3" *ngIf="!data.list || data.list.length === 0" style="cursor: pointer;"
                    (click)="onToggleMode('EDIT')" title="Click to edit">
                    <i>click to edit</i>
                </div>
            </div>
            <div class="mt-3 text-right">
                <button class="btn btn-primary" (click)="onToggleMode('EDIT')">
                    <fa-icon icon="pencil-alt"></fa-icon> Edit
                </button>
            </div>
        </div>

        <div *ngIf="mode === 'EDIT'">
            <div class="bg-light p-3">
                <div class="p-2" *ngFor="let item of dataToEdit.list;let idx = index">
                    <button class="btn btn-link btn-sm float-right text-danger" (click)="remove(idx)">
                        <fa-icon icon="times"></fa-icon>
                    </button>
                    {{item.title}}
                </div>
                <div class="p-2">
                    <div class="input-group">
                        <input type="text" class="form-control" [appAutofocus]="mode === 'EDIT'"
                            [(ngModel)]="newRecord.title" (keydown.control.enter)="onSave()" (keydown.enter)="add()"
                            (keydown.escape)="onCancel($event)" (keydown.control.escape)="onToggleMode('VIEW')" />
                        <div class="input-group-append">
                            <button class="btn btn-primary" type="button" [disabled]="!canAdd()" (click)="add()">
                                <fa-icon icon="check"></fa-icon>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="mt-3 text-right">
                <button class="btn btn-primary mr-2" (click)="onSave()">
                    <fa-icon icon="save"></fa-icon> Save
                </button>
                <button class="btn btn-light" (click)="onToggleMode('VIEW')">
                    <fa-icon icon="times"></fa-icon> Cancel
                </button>
            </div>
        </div>
    </div>
    <div *ngIf="mode !== 'EDIT'" class="offset-md-1 col-md-5">
        <app-record-editor [item]="selectedItem" (itemChange)="onItemChanged($event)" [showDelete]="true" (delete)="onDelete($event)">
        </app-record-editor>
    </div>
</div>